# ---- wujinjun 其他设置 ----

# 1. Target Images

# 开启 ext4 镜像，关闭 squashfs 镜像
CONFIG_TARGET_ROOTFS_EXT4FS=y
CONFIG_TARGET_ROOTFS_SQUASHFS=n

# 来点缓冲
CONFIG_GRUB_TIMEOUT=5

# 遇水变大变高 ?
CONFIG_TARGET_KERNEL_PARTSIZE=512
CONFIG_TARGET_ROOTFS_PARTSIZE=2048

# ISO 启动镜像 (方便临时测试)
#CONFIG_ISO_IMAGES=y

# 虚拟机镜像
## 大量占用存储空间，无法编译，禁用
CONFIG_VMDK_IMAGES=n
# CONFIG_QCOW2_IMAGES=y
# CONFIG_VDI_IMAGES=y
# CONFIG_VHDX_IMAGES=y

# /var 持久化
CONFIG_TARGET_ROOTFS_PERSIST_VAR=y

# 1.1 Kernel build options

# 在 dmesg 显示: 内核 软/硬 锁定、任务卡死
## CONFIG_KERNEL_HARDLOCKUP_DETECTOR 不能使用: 与 CONFIG_DEVEL and CONFIG_BROKEN 冲突。 `make -j1 V=s` 可见 `  SYNC    include/config/auto.conf.cmd` 后，自动填写配置时，部分项目没有自动填写，导致卡死，超时后会失败退出
CONFIG_KERNEL_SOFTLOCKUP_DETECTOR=y
CONFIG_KERNEL_HARDLOCKUP_DETECTOR=n
CONFIG_KERNEL_DETECT_HUNG_TASK=y
CONFIG_KERNEL_WQ_WATCHDOG=y

# Compile the kernel with device tmpfs enabled
CONFIG_KERNEL_DEVTMPFS=y
## Automatically mount devtmpfs after root filesystem is mounted
CONFIG_KERNEL_DEVTMPFS_MOUNT=y

# Compile the kernel with built-in {BTRFS,EROFS} support
# CONFIG_KERNEL_BTRFS_FS=y
# CONFIG_KERNEL_EROFS_FS=y

# /dev/mem virtual device support
CONFIG_KERNEL_DEVMEM=y

# end 1.1 Kernel build options
# end 1. Target Images

# 2. Advanced configuration options (for developers)
CONFIG_DEVEL=y

# Show broken platforms / packages / devices
CONFIG_BROKEN=y

# 3. Build the OpenWrt Image Builder
#CONFIG_IB=y
